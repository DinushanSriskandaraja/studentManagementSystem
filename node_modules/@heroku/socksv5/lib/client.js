var net = require('net'),
    normalizeConnectArgs = normalizeConnectArgs,
    dns = require('dns'),
    util = require('util'),
    inherits = util.inherits,
    EventEmitter = require('events').EventEmitter;

function normalizeConnectArgs(args) {
    var options = {};

    if (args.length === 0) {
        return [options];
    } else if (args[0] !== null && typeof args[0] === 'object') {
        // connect(options, [cb])
        options = args[0];
    } else if (typeof args[0] === 'string' && !(Number(args[0]) >= 0)) {
        // connect(path, [cb]);
        options.path = args[0];
    } else {
        // connect(port, [host], [cb])
        options.port = args[0];
        if (args.length > 1 && typeof args[1] === 'string') {
            options.host = args[1];
        }
    }

    var cb = args[args.length - 1];
    return typeof cb === 'function' ? [options, cb] : [options];
}

var Parser = require('./client.parser'),
    ipbytes = require('./utils').ipbytes